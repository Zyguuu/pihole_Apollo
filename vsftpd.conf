###############################################################
# vsftpd.conf — Konfiguracja kompletna dla openSUSE Leap 16
###############################################################

# --- PODSTAWY ---
listen=YES
listen_ipv6=NO
anonymous_enable=YES
local_enable=YES
write_enable=YES

# --- USTAWIENIA DLA ANONIMOWYCH ---
# Anonimowy użytkownik może odczytywać, wysyłać, modyfikować i tworzyć pliki
anon_upload_enable=YES
anon_mkdir_write_enable=YES
anon_other_write_enable=YES
anon_world_readable_only=NO

# Wymagaj hasła od anonimowych (np. email)
no_anon_password=NO

# Katalog domowy dla anonimowych
anon_root=/srv/ftp

# --- USTAWIENIA DLA UŻYTKOWNIKÓW LOKALNYCH ---
# Logowanie przez użytkowników systemowych
local_enable=YES
write_enable=YES

# Izolacja użytkowników we własnych katalogach
chroot_local_user=YES
allow_writeable_chroot=YES

# Domyślny katalog dla lokalnych
local_root=/home/ftp

# --- TRYB PASYWNY FTP (konieczny za NAT/firewallem) ---
pasv_enable=YES
pasv_min_port=40000
pasv_max_port=50000
# pasv_address=<Twoje_IP_publiczne>  # Możesz odkomentować i ustawić adres zewnętrzny

# --- INDYWIDUALNE KONFIGURACJE UŻYTKOWNIKÓW ---
# Każdy użytkownik może mieć osobne ustawienia
user_config_dir=/etc/vsftpd_user_conf

# --- DOSTĘP DLA WYBRANYCH UŻYTKOWNIKÓW ---
userlist_enable=YES
userlist_file=/etc/vsftpd.userlist
userlist_deny=NO

# --- BEZPIECZEŃSTWO ---
hide_ids=YES
seccomp_sandbox=NO
pam_service_name=vsftpd

# --- LOGOWANIE ---
xferlog_enable=YES
xferlog_std_format=YES
xferlog_file=/var/log/vsftpd.log
dual_log_enable=YES
log_ftp_protocol=YES

# --- TLS (opcjonalnie, można dodać później) ---
# ssl_enable=YES
# rsa_cert_file=/etc/ssl/private/vsftpd.pem
# rsa_private_key_file=/etc/ssl/private/vsftpd.pem
###############################################################
